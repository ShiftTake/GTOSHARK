<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTO Shark - Poker Range Solver Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5; /* Indigo-600 */
            --background: #0f172a; /* Slate-900 */
            --card: #1e293b; /* Slate-800 */
            --text: #e2e8f0; /* Slate-200 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }
        .solver-card {
            background-color: var(--card);
            border: 1px solid #334155; /* Slate-700 */
        }
        .cta-button {
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4);
        }
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.6);
        }

        /* 13x13 Grid for Hand Matrix */
        .hand-matrix-grid {
            display: grid;
            grid-template-columns: repeat(13, 1fr);
            grid-template-rows: repeat(13, 1fr);
            aspect-ratio: 1 / 1; /* Keep it square */
            max-width: 500px;
            width: 100%;
        }

        .hand-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid rgba(15, 23, 42, 0.8); /* Dark grid lines */
            transition: all 0.1s;
        }
        .hand-cell:hover {
            filter: brightness(1.2);
            z-index: 10;
        }

        /* Color classes to simulate GTO frequencies (Indigo, Cyan, Red) */
        .freq-bet { background-color: #4f46e5; color: white; } /* Indigo-600 */
        .freq-check { background-color: #0d9488; color: white; } /* Teal-600 */
        .freq-fold { background-color: #ef4444; color: white; } /* Red-500 */
        .freq-raise { background-color: #f59e0b; color: #1f2937; } /* Amber-500 */
        .freq-mixed { background-color: #64748b; color: white; } /* Slate-500 */
        .freq-unopened { background-color: #334155; color: #a1a1aa; } /* Slate-700 - default/unopened hands */

        /* Responsive adjustments for cell size */
        @media (max-width: 640px) {
            .hand-cell {
                font-size: 0.6rem;
            }
        }
    </style>
</head>
<body>

    <!-- Header / Navigation -->
    <header class="bg-slate-900 sticky top-0 z-10 border-b border-indigo-900/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="text-3xl font-extrabold text-indigo-400 tracking-tight">
                GTO <span class="text-white">Shark</span>
            </div>
            <a href="gto_shark_game_selection.html" class="text-sm font-medium text-slate-400 hover:text-indigo-400 transition flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Back to Selector
            </a>
        </div>
    </header>

    <main class="py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">

            <h1 class="text-3xl md:text-4xl font-extrabold text-white mb-2">
                Pre-Flop Solver Demo: <span class="text-indigo-400">BTN vs SB 3-Bet</span>
            </h1>
            <p class="text-slate-400 text-lg mb-8">
                Explore the Game Theory Optimal strategy for this common pre-flop spot.
            </p>

            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Control Panel (Left/Top) -->
                <div class="lg:w-1/3 w-full space-y-6">
                    <div class="solver-card p-6 rounded-xl shadow-2xl">
                        <h3 class="text-xl font-bold text-white mb-4">Scenario Controls</h3>
                        <div class="space-y-4">
                            <!-- Street Selector -->
                            <div>
                                <label for="street" class="block text-sm font-medium text-slate-300 mb-1">Current Street/Spot</label>
                                <select id="street" class="w-full p-2 rounded-lg bg-slate-700 border border-slate-600 text-white focus:ring-indigo-500 focus:border-indigo-500 transition">
                                    <option>Pre-Flop (Active)</option>
                                    <option>Flop (Demo Disabled)</option>
                                    <option>Turn (Demo Disabled)</option>
                                </select>
                            </div>
                            <!-- Action Selector -->
                            <div>
                                <label for="action" class="block text-sm font-medium text-slate-300 mb-1">BTN Player Action</label>
                                <select id="action" class="w-full p-2 rounded-lg bg-slate-700 border border-slate-600 text-white focus:ring-indigo-500 focus:border-indigo-500 transition" onchange="generateRanges()">
                                    <option value="call">Call 3-Bet Range</option>
                                    <option value="4bet">4-Bet Range</option>
                                    <option value="fold">Fold Range</option>
                                </select>
                            </div>
                            <!-- Board/Card Input (Mock) -->
                            <div>
                                <label for="board" class="block text-sm font-medium text-slate-300 mb-1">Board (Flop/Turn/River)</label>
                                <input type="text" id="board" value="No Board (Pre-Flop)" disabled class="w-full p-2 rounded-lg bg-slate-900 border border-indigo-500 text-slate-400 opacity-70">
                            </div>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="solver-card p-6 rounded-xl shadow-2xl">
                        <h3 class="text-xl font-bold text-white mb-4">GTO Frequency Legend</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center">
                                <span class="w-4 h-4 rounded-full freq-bet mr-3"></span>
                                <span class="text-white font-semibold">Bet/Raise (60-100% Freq)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 h-4 rounded-full freq-check mr-3"></span>
                                <span class="text-white font-semibold">Call/Check (60-100% Freq)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 h-4 rounded-full freq-raise mr-3"></span>
                                <span class="text-white font-semibold">Mixed Strategy (Split Freq)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 h-4 rounded-full freq-fold mr-3"></span>
                                <span class="text-white font-semibold">Fold/Muck (60-100% Freq)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 h-4 rounded-full freq-unopened mr-3"></span>
                                <span class="text-slate-400">Unopened Hand / No Data</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hand Matrix Viewer (Right/Bottom) -->
                <div class="lg:w-2/3 w-full">
                    <div class="solver-card p-6 rounded-xl shadow-2xl flex flex-col items-center">
                        <h3 class="text-xl font-bold text-indigo-400 mb-4 text-center w-full">BTN vs SB 3-Bet Strategy</h3>
                        <div id="hand-matrix" class="hand-matrix-grid">
                            <!-- Matrix cells will be generated here by JavaScript -->
                        </div>
                        <p class="text-sm text-slate-500 mt-4">Diagonal = Pocket Pairs (e.g., AA, KK). Above Diagonal = Suited. Below Diagonal = Offsuit.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer for context -->
    <footer class="bg-slate-900 border-t border-indigo-900/50 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <p class="text-center text-xs text-slate-600">GTO Shark Solver Demo. Data is representative and for demonstration purposes only.</p>
        </div>
    </footer>

    <script>
        // Mapping of card ranks for the 13x13 matrix
        const RANKS = ['A', 'K', 'Q', 'J', 'T', '9', '8', '7', '6', '5', '4', '3', '2'];
        const matrixContainer = document.getElementById('hand-matrix');
        const actionSelector = document.getElementById('action');

        // GTO Frequencies for demonstration
        const freqMap = {
            'call': ['freq-bet', 'freq-check', 'freq-raise', 'freq-mixed', 'freq-fold', 'freq-unopened'],
            '4bet': ['freq-bet', 'freq-raise', 'freq-mixed', 'freq-fold', 'freq-unopened'],
            'fold': ['freq-fold', 'freq-unopened', 'freq-mixed']
        };

        // Function to get the hand string (AA, AKo, AKs, etc.)
        function getHandString(row, col) {
            const rank1 = RANKS[row];
            const rank2 = RANKS[col];

            if (row < col) { // Suited (above diagonal)
                return `${rank2}${rank1}s`;
            } else if (row > col) { // Offsuit (below diagonal)
                return `${rank1}${rank2}o`;
            } else { // Paired (on diagonal)
                return `${rank1}${rank2}`;
            }
        }

        // Function to generate the matrix with simulated GTO ranges
        function generateRanges() {
            matrixContainer.innerHTML = ''; // Clear existing matrix
            const selectedAction = actionSelector.value;
            const availableFrequencies = freqMap[selectedAction];

            for (let i = 0; i < 13; i++) {
                for (let j = 0; j < 13; j++) {
                    const cell = document.createElement('div');
                    const hand = getHandString(i, j);

                    cell.textContent = hand;
                    cell.className = 'hand-cell';
                    cell.setAttribute('data-hand', hand);

                    // Logic to apply simulated GTO color classes
                    let freqClass;
                    const rand = Math.random();

                    if (i === j) { // Pairs
                        if (i < 4) { // AA-JJ (Strong Pairs)
                            freqClass = selectedAction === 'fold' ? 'freq-mixed' : 'freq-bet';
                        } else if (i < 8) { // TT-77 (Medium Pairs)
                            freqClass = selectedAction === 'call' ? 'freq-check' : (selectedAction === '4bet' ? 'freq-mixed' : 'freq-fold');
                        } else { // Small Pairs
                            freqClass = selectedAction === 'fold' ? 'freq-fold' : (selectedAction === '4bet' ? 'freq-fold' : 'freq-mixed');
                        }
                    } else if (i < j) { // Suited hands (Above diagonal)
                        if (j === 0 && i < 3) { // Suited Aces (Axs)
                            freqClass = selectedAction === 'fold' ? 'freq-mixed' : 'freq-check';
                        } else if (i < 2 && j < 5) { // Suited Broadways
                            freqClass = selectedAction === '4bet' ? 'freq-raise' : 'freq-bet';
                        } else if (rand < 0.2) {
                             freqClass = 'freq-unopened'; // Random trash
                        } else {
                            freqClass = availableFrequencies[Math.floor(Math.random() * availableFrequencies.length)];
                        }
                    } else { // Offsuit hands (Below diagonal)
                        if (j === 0 && i < 3) { // Offsuit Aces (Axo)
                            freqClass = selectedAction === 'fold' ? 'freq-fold' : 'freq-mixed';
                        } else if (i < 3 && j < 3) { // Offsuit Broadways
                            freqClass = selectedAction === '4bet' ? 'freq-mixed' : 'freq-check';
                        } else if (rand < 0.8) {
                            freqClass = 'freq-fold'; // Mostly fold offsuit trash
                        } else {
                            freqClass = availableFrequencies[Math.floor(Math.random() * availableFrequencies.length)];
                        }
                    }

                    cell.classList.add(freqClass);

                    // Add hover display for GTO action
                    cell.addEventListener('mouseover', () => {
                        const actionText = cell.classList.contains('freq-bet') ? 'BET (100%)' :
                                           cell.classList.contains('freq-check') ? 'CALL/CHECK (80%)' :
                                           cell.classList.contains('freq-fold') ? 'FOLD (100%)' :
                                           cell.classList.contains('freq-raise') ? '4-BET/RAISE (70%)' :
                                           cell.classList.contains('freq-mixed') ? 'Mixed (50% Action/50% Fold)' :
                                           'Not In Range';
                        cell.title = `${hand}: ${actionText}`;
                    });

                    matrixContainer.appendChild(cell);
                }
            }
        }

        // Initialize the solver demo
        document.addEventListener('DOMContentLoaded', () => {
            generateRanges(); // Load initial ranges
        });

    </script>

</body>
</html>
